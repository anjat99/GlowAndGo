function ajaxProizvodi(i){$.ajax({url:"assets/data/products.json",method:"get",dataType:"json",success:i})}function ajaxKategorije(i){$.ajax({url:"assets/data/categories.json",method:"get",dataType:"json",success:i})}function ajaxBrendovi(i){$.ajax({url:"assets/data/brends.json",method:"get",dataType:"json",success:i})}function prikaziProizvode(){ajaxProizvodi(i=>{ispisiProizvode(i),ispisModala(i),wishlistProizvodi(i)})}function wishlistProizvodi(i){const e=$(".add-to-wishlist");for(var o of(console.log(e),e))o.addEventListener("click",a);function a(){var e=$(this).data("idomiljeno");console.log(e),alert("Drago nam je da Vam se sviđa ovaj proizvod!"),alert("Sve proizvode koje budete sačuvali biće vam u listi želja...");var o=[],a=t();if(console.log(a),console.log(o),null!==a)if(a.filter(i=>i.id==e).length){console.log("ima");let i=t();for(let o of i)if(o.id==e){o.kolicina++;break}n(i)}else{for(let i of a)o.push(i);let t=i.find(i=>i.id==e);o.push({id:t.id,kolicina:1}),n(o)}else{let a=i.find(i=>i.id==e);o[0]={id:a.id,kolicina:1},n(o)}function t(){return JSON.parse(localStorage.getItem("proizvodi"))}function n(i){return localStorage.setItem("proizvodi",JSON.stringify(i))}console.log(a),console.log(o)}}function ispisiProizvode(i){var e=document.querySelector("#proizvodi");let o="";var a=Object.values(i);console.log(a);let t=1;if(i.length>0)for(const i of a)o+=`\n            <article class="proizvod col-xl-3 col-lg-4 col-md-6 col-sm-12 artikal-items">\n            <div class="image">\n            <a href="#" rel="proizvodiSlika">\n                 <img src="${i.slika.putanja}" alt="${i.slika.putanja}" class="img-fluid product" />\n            </a>\n                <div class="overImage">\n                    <button class="view" data-id="${i.id}" data-toggle="modal" data-target="#exampleModal${t}" data-whatever="view">\n                        Quick view\n                    </button>\n                </div>\n            </div>\n            <div class="tekstProizvod">\n                <h2>${i.naziv}</h2>\n                <h2>${naStanju(i.naStanju)}</h2>\n                <p class="rating">\n                    ${prikaziRating(i.zvezdice)}\n                </p> \n                <div class="info-product-price my-2">\n                    <span class="item_price text-dark font-weight-bold">${i.cena.snizeno}RSD</span>\n                    <sup><del>${i.cena.original}RSD</del></sup>\n                </div>\n                <div class="snipcart-details top_brand_home_details item_add single-item hvr-outline-out">\n                    <input type="button" title="dodaj u listu želja" data-toggle="tooltip" data-placement="bottom" value="Dodaj u omiljene" class="button btn add-to-wishlist"  data-idomiljeno="${i.id}" />\n                </div>\n            </div>\n        </article> \n            `,t++;else o+='<h2 class="text-center blok-1 text-black">Žao nam je, ne možemo naći ni jedan rezultat!</h2>';e.innerHTML=o}function prikaziKategorije(){ajaxKategorije(i=>{ispisiKategorije(i)})}function ispisiKategorije(i){let e="<ul>";i.forEach(i=>{e+=`\n            <li>\n                <a href="#" data-idkat="${i.id}">${i.naziv}</a>\n            </li>\n        `}),e+="</ul>",$("#kategorije").html(e),$("#kategorije ul li a").click(filtrirajPoKategoriji)}function filtrirajPoKategoriji(i){i.preventDefault();let e=$(this).data("idkat");$.ajax({url:"assets/data/products.json",method:"GET",success:function(i){i=filterPoKategoriji(i,e),console.log(i),ispisiProizvode(i),ispisModala(i),wishlistProizvodi(i)}})}function filterPoKategoriji(i,e){return i.filter(i=>i.kategorije.idKategorije==e)}function prikaziKategorijeZaMobilne(){ajaxKategorije(i=>{console.log(i),ispisiKategorijeZaMobilne(i)})}function ispisiKategorijeZaMobilne(i){let e='<option value="0">Izaberite kategoriju</option> ';i.forEach(i=>{e+=`\n        <option value="${i.id}" data-idkat="${i.id}">${i.naziv}</option> \n        \n        `}),$("#kategorijeMob").html(e),$("#kategorijeMob").change(filtrirajPoKategorijiMob)}function filtrirajPoKategorijiMob(){let i=$(this).val();console.log(i),ajaxProizvodi(e=>{e=filterPoKategorijiMob(e,i),console.log(e),ispisiProizvode(e),ispisModala(e),wishlistProizvodi(e)})}function filterPoKategorijiMob(i,e){return i.filter(i=>i.kategorije.idKategorije==e)}function sortirajProizvode(){var i=$(this).val();ajaxProizvodi(e=>{console.log(e);let o=e;"priceUp"==i?o=e.sort((i,e)=>i.cena.snizeno-e.cena.snizeno):"priceDown"==i?o=e.sort((i,e)=>e.cena.snizeno-i.cena.snizeno):"nameAZ"==i?e.sort(function(i,e){return i.naziv>e.naziv?1:e.naziv<i.naziv?-1:0}):"nameZA"==i?e.sort(function(i,e){return i.naziv>e.naziv?-1:e.naziv<i.naziv?1:0}):"recent"==i&&e.sort(function(i,e){return new Date(e.datumUnosa)-new Date(i.datumUnosa)}),ispisiProizvode(o),ispisModala(o),wishlistProizvodi(e)})}function prikaziBrendove(){$.ajax({url:"assets/data/brends.json",dataType:"json",method:"get",success:function(i){prikazBrenda(i)}})}function prikazBrenda(i){let e="<ul>";i.forEach(i=>{e+=`\n        <li>\n            <a href="#" data-idbrend="${i.id}">${i.naziv}</a>\n        </li>\n    `}),e+="</ul>",$("#brendovi").html(e),$("#brendovi li a").click(filtrirajPoBrendu)}function filtrirajPoBrendu(i){i.preventDefault();let e=$(this).data("idbrend");$.ajax({url:"assets/data/products.json",method:"GET",success:function(i){ispisiProizvode(i=filterPoBrendu(i,e)),ispisModala(i),wishlistProizvodi(i)}})}function filterPoBrendu(i,e){return i.filter(i=>i.brend.id==e)}function prikaziBrendoveZaMobilne(){ajaxBrendovi(i=>{ispisiBrendoveZaMobilne(i)})}function ispisiBrendoveZaMobilne(i){let e='<option value="0">Izaberite brend...</option>';i.forEach(i=>{e+=`\n        <option value="${i.id}" data-idbrend="${i.id}">${i.naziv}</option> \n        `}),$("#brendoviMob").html(e),$("#brendoviMob").change(filtrirajPoBrenduMob)}function filtrirajPoBrenduMob(){let i=$(this).val();console.log(i),ajaxProizvodi(e=>{e=filterPoBrenduMob(e,i),console.log(e),ispisiProizvode(e),ispisModala(e),wishlistProizvodi(e)})}function filterPoBrenduMob(i,e){return i.filter(i=>i.brend.id==e)}function filtrirajPoNazivu(){let i=this.value;console.log("radi search"),ajaxProizvodi(e=>{e=e.filter(e=>{if(-1!=e.naziv.toUpperCase().indexOf(i.toUpperCase()))return!0}),console.log(e),ispisiProizvode(e),ispisModala(e),wishlistProizvodi(e)})}function filtrirajPoNazivuMob(){let i=this.value;console.log("radi search"),ajaxProizvodi(e=>{e=e.filter(e=>{if(-1!=e.naziv.toUpperCase().indexOf(i.toUpperCase()))return!0}),console.log(e),ispisiProizvode(e),ispisModala(e),wishlistProizvodi(e)})}function izmeniOutput(){var i=this.value;document.getElementById("demo").textContent=i}function filtrirajCenu(){ajaxProizvodi(i=>{ispisiProizvode(i=returnFiltriranuCenu(i,document.getElementById("rangePrice").value)),ispisModala(i),wishlistProizvodi(i)})}function returnFiltriranuCenu(i,e){return i.filter(i=>{if(i.cena.snizeno<=e)return i})}function ispisModala(i){let e="",o=1;for(let a of i)e+=`\n        <div class="modal fade" id="exampleModal${o}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">\n            <div class="modal-dialog" role="document">\n                <div class="modal-content">\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    <figure>\n                        <img src="${a.slika.putanja}" alt="${a.slika.alt}" class="img-fluid"/>\n                    </figure>\n                    <div class="modal-header">\n                        <h3 class="modal-title">${a.naziv}</h3>\n                        \n                        <p>${a.opis}</p>\n                        <div class="price my-2">\n                            <span class="item_price text-dark font-weight-bold">${a.cena.snizeno}RSD</span>\n                            <sup><del>${a.cena.original}RSD</del></sup>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btnModal btn-secondary" data-dismiss="modal">Nazad</button>\n                            <button type="button" title="dodaj u listu želja" data-toggle="tooltip" data-placement="bottom" value="Dodaj u omiljene" class="btnModal btn-secondary  add-to-wishlist"  data-idomiljeno="${a.id}">\n                                Dodaj u omiljeno\n                            </button>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>`,o++;$("#modaliProizvoda").html(e),$("#exampleModal").on("show.bs.modal",function(i){$(i.relatedTarget).data("whatever");$(this).show()}),$("#exampleModal").on("hide.bs.modal",function(i){$(i.relatedTarget).data("id");$(this).hide()})}function naStanju(i){return i?"Na stanju":"<del>Nije na stanju</del>"}function prikaziRating(i){let e="";for(let o=1;o<=5;o++)e+=o<=i?"<i class='fas fa-star'></i>":"<i class='far fa-star'></i>";return e}$(document).ready(()=>{console.log("Shop"),function(){let i=' <option value="0" selected>Sortiraj po:</option>';const e=[{value:"priceUp",vrednosti:"Cena rastuće",kriterijum:"price",redosled:"asc"},{value:"priceDown",vrednosti:"Cena opadajuće",kriterijum:"price",redosled:"desc"},{value:"nameAZ",vrednosti:"Naziv A-Z",kriterijum:"name",redosled:"asc"},{value:"nameZA",vrednosti:"Naziv Z-A",kriterijum:"name",redosled:"desc"},{value:"recent",vrednosti:"Najnoviji",kriterijum:"recent",redosled:"desc"}];for(const o of e)i+=`<option class="sort" value="${o.value}" data-kriterijum="${o.kriterijum}" data-redosled="${o.redosled}" >${o.vrednosti}</option>`;$("#sort").html(i)}(),prikaziProizvode(),prikaziKategorije(),prikaziKategorijeZaMobilne(),prikaziBrendove(),prikaziBrendoveZaMobilne(),$(".viewMode .active a").on("click",function(){$(this).hasClass("tri")?$(".proizvod").css("flex-basis","35%"):$(this).hasClass("cetiri")&&$(".proizvod").css("flex-basis","20%")});const i=i=>document.querySelector(i);EventTarget.prototype.on=EventTarget.prototype.addEventListener,i("#pretraga").on("keyup",filtrirajPoNazivu),i("#pretragaMob").on("keyup",filtrirajPoNazivuMob),$("#pol").find("input[name='rbPol']").click(function(){let i=this.value;$.ajax({url:"assets/data/products.json",dataType:"json",method:"get",success:function(e){var o=e.filter(e=>{if(e.pol==i)return!0});console.log(o),ispisiProizvode(o),ispisModala(o),wishlistProizvodi(o)}})});const e=document.getElementById("rangePrice");e.addEventListener("input",izmeniOutput),e.addEventListener("change",filtrirajCenu),document.getElementById("otvoriNoviTab").addEventListener("click",function(){window.open("https://tomicanja-portfolio.netlify.com/","_blank")})}),$(document).on("change","#sort",sortirajProizvode);